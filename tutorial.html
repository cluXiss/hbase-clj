<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>A Quick Tutorial to hbase-clj</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Org.cluxis.hbase-clj</span> <span class="project-version">0.1.0-alpha.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction to hbase-clj</span></div></a></li><li class="depth-1  current"><a href="tutorial.html"><div class="inner"><span>A Quick Tutorial to hbase-clj</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hbase-clj</span></div></div></li><li class="depth-2 branch"><a href="hbase-clj.codec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codec</span></div></a></li><li class="depth-2 branch"><a href="hbase-clj.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="hbase-clj.manage.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>manage</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#a-quick-tutorial-to-hbase-clj" name="a-quick-tutorial-to-hbase-clj"></a>A Quick Tutorial to hbase-clj</h1>
<p>First, require the required namespaces</p>
<pre><code>(require 
 '(hbase-clj
	 [core :refer :all]
	 [manage :refer :all])))
</code></pre>
<p>We could define an hbase handler via <a href="http://cluxiss.github.io/hbase-clj/hbase-clj.core.html#var-defhbase">hbase-clj.core/defhbase</a> The code below defines a handler which connects to the localhost HBase</p>
<pre><code>(defhbase test-hbase 
  "hbase.zookeeper.quorum" "localhost")
</code></pre>
<p>We could create a table via <a href="http://cluxiss.github.io/hbase-clj/hbase-clj.manage.html#var-create-table.21">hbase-clj.manage/create-table!</a> The code below creates a table named <code>test_stu</code> using the hbase handler defined above.</p>
<pre><code>(def table-name "test_stu")

(create-table! 
  test-hbase table-name
  "info" "score")
</code></pre>
<p>Before we perform any CRUDs on the table, we must create a “schema” on it. The Schema describes how the data from an HBaseTable could be transformed into clojure data-structures. We define a schema via <a href="http://cluxiss.github.io/hbase-clj/hbase-clj.core.html#var-def-hbtable">hbase-clj.core/def-hbtable</a></p>
<pre><code>(def-hbtable test-table
  {:id-type :string 
   :table-name table-name
   :hbase test-hbase}
  :info  {:--ktype :keyword  :--vtype :long :name :string}
  :score {:--ktype :keyword  :--vtype :long})
</code></pre>
<p>Then we could perform CRUDs inside a table using <a href="http://cluxiss.github.io/hbase-clj/hbase-clj.core.html#var-with-table">hbase-clj.core/with-table</a></p>
<pre><code>(with-table test-table
  (put! 
    ["101" {:info {:age 17 :name "Alice"}
            :score {:math 99 :physics 78}}]

    ["102" {:info {:age 19 :name "Bob"}
            :score {:math 63 :physics 52}}]))
</code></pre>
<p>The <a href="http://cluxiss.github.io/hbase-clj/hbase-clj.core.html#var-get">hbase-clj.core/get</a> function gets data according to row-keys and other constraints. and returns it as a vector of <code>vec: [row-key data]</code></p>
<pre><code>(get "102") 
;; =&gt; [["102"
        {:info {:age 19 :name "Bob"}
         :score {:math 63 :physics 52}}]]
</code></pre>
<p>We can specify the families and cols either</p>
<pre><code>(get "102" {:info :*}) 
;; =&gt; [["102" {:info {:age 19 :name "Bob"}}]]

(get "102" {:info :age}) 
;; =&gt; [["102" {:info {:age 19}}]]

(get "102" {:info [:age :name]}) 
;; =&gt; [["102" {:info {:age 19 :name "Bob"}}]]
</code></pre>
<p>If specified <code>with-versions</code> as the first argument, get acts a little different</p>
<pre><code>(get :with-versions "102" {:info :age})
;; =&gt; [["102" {:info {:age [ {:val 19 :timestamp xxxxxxx} 
   	                         ...]}}]]
</code></pre>
<p>And we’ve got other tasty functions like * <a href="http://cluxiss.github.io/hbase-clj/hbase-clj.core.html#var-scan">hbase-clj.core/scan</a> * <a href="http://cluxiss.github.io/hbase-clj/hbase-clj.core.html#var-incr">hbase-clj.core/incr!</a> * …</p>
<p>Check the <a href="http://cluxiss.github.io/hbase-clj/">complete doc</a>!</p></div></div></div></body></html>